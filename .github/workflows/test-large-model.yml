name: Performance test
on:
  push:
    branches:
      - develop
      - master
      - feature_846_large_model
  pull_request:
    branches:
      - master

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
      with:
        fetch-depth: 1
    # install dependencies
    - name: apt
      run: sudo apt-get install -y swig3.0 libatlas-base-dev && sudo ln -s /usr/bin/swig3.0 /usr/bin/swig
    - run: pip3 install --upgrade --user wheel && pip3 install --upgrade --user setuptools
    # install AMICI
    - run: AMICI_PARALLEL_COMPILE=2 pip3 install --user -e python/sdist && export PATH=${HOME}/.local/bin/:${PATH}
    # retrieve test model
    - run: git clone --depth 1 https://github.com/ICB-DCM/CS_Signalling_ERBB_RAS_AKT
    # import test model
    - run: cd CS_Signalling_ERBB_RAS_AKT && ./generate_amici_model.sh
    # TODO: run simulation
